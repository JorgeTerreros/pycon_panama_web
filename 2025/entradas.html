<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <title>Entradas | PyCon Panam√° 2025</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta name="description" content="Informaci√≥n sobre entradas para PyCon Panam√° 2025. A√∫n no est√°n habilitadas.">

  <link href="img/pycon25.png" rel="icon">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/style.min.css" rel="stylesheet">
  <link href="css/theme-2025.css" rel="stylesheet">

  <!-- CSP r√°pida (mejor en encabezado HTTP en prod) -->
<meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  script-src 'self' https://s.pageclip.co 'unsafe-inline';
  style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com;
  img-src 'self' data:;
  font-src 'self' data: https://fonts.gstatic.com https://cdnjs.cloudflare.com;
  connect-src 'self' https://send.pageclip.co;
  frame-ancestors 'none';
  base-uri 'self';
  form-action https://send.pageclip.co;
  object-src 'none';
  upgrade-insecure-requests">



  
</head>

<body class="bg-sprinkle">
  <div data-include="header"></div>

  <!-- Header visual consistente con el resto del sitio -->
  <div class="container-fluid page-header">
    <div class="container">
      <div class="d-flex flex-column align-items-center justify-content-center text-center" style="min-height: 300px">
        <h3 class="display-4 text-white text-uppercase">Registro</h3>
        <div class="d-inline-flex text-white">
          <p class="m-0 text-uppercase"><a class="text-white" href="index.html">Inicio</a></p>
          <i class="fa fa-angle-double-right pt-1 px-3"></i>
          <p class="m-0 text-uppercase">Registro</p>
        </div>
      </div>
    </div>
  </div>

  <main class="container py-5" role="main">
    <div class="row justify-content-center">
      <div class="col-lg-10">
        <section id="tickets-page" class="section-muted p-4 p-md-5 rounded">
          <div class="row">
            <div class="col-lg-5 mb-4 mb-lg-0">
              <h1 class="mb-3">Registro de Participantes</h1>
              <p class="lead mb-3"></p>
              <p class="mb-2">Bienvenido al registro oficial de PyCon Panam√° 2025, la conferencia anual
                de la comunidad Python en Panam√°.</p>
              <p class="mb-1">üìÖ <strong>Fechas:</strong> 16 y 17 de octubre de 2025</p>
              <p class="mb-2">üìç <strong>Sedes:</strong></p>
              <ul class="mb-2">
                <li><strong>Jueves 16</strong> ‚Äì Cine Universitario UP
                </li>
                <li><strong>Viernes 17</strong> ‚Äì Virtual</li>
                <li><strong>Viernes 17</strong> ‚Äì El √ëeque Taproom (noche)</li>
                <li><strong>S√°bado 18</strong> ‚Äì PyParty üéâ</li>
              </ul>
              <p class="mb-3">Este es un evento organizado por voluntarios, que re√∫ne a estudiantes,
                profesionales y apasionados de la tecnolog√≠a para aprender, colaborar y compartir conocimientos.</p>
              <p class="mb-4">Por favor, completa tus datos para reservar tu espacio.</p>
            </div>

            <div class="col-lg-7">
              <div class="p-3 p-md-4 rounded bg-white shadow-sm">
                <h2 class="h4 mb-3">Reg√≠strate en menos de 1 minuto</h2>

                <!-- Formulario Pageclip -->
                <form id="pc25-form" action="https://send.pageclip.co/uux6doIwLu3hcP9utEkr5TETD1WtW8qE/PyCon"
                  class="pageclip-form" method="post" autocomplete="on" data-pageclip-redirect="/2025/gracias.html">

                  <input type="hidden" name="registration_code" id="pc-code" value="">

                  <div class="form-row">
                    <div class="form-group col-md-12">
                      <label for="pc-name">Nombre completo <span class="text-danger">*</span></label>
                      <input id="pc-name" type="text" name="name" class="form-control" placeholder="Tu nombre completo"
                        required maxlength="120" />
                    </div>
                  </div>

                  <div class="form-row">
                    <div class="form-group col-md-6">
                      <label for="pc-email">Correo electr√≥nico <span class="text-danger">*</span></label>
                      <input id="pc-email" type="email" name="email" class="form-control"
                        placeholder="tucorreo@ejemplo.com" required autocomplete="email" maxlength="120" />
                    </div>
                    <div class="form-group col-md-6">
                      <label for="pc-phone">WhatsApp (opcional)</label>
                      <input id="pc-phone" type="tel" name="phone" class="form-control" placeholder="+507 6000-0000"
                        autocomplete="tel" inputmode="tel" maxlength="30" pattern="^\+?\d[\d\s\-]{7,}$" />
                    </div>
                  </div>

                  <div class="form-row">
                    <div class="form-group col-md-6">
                      <label for="pc-org">Instituci√≥n / Empresa</label>
                      <input id="pc-org" type="text" name="organization" class="form-control"
                        placeholder="Empresa, universidad" maxlength="120" />
                    </div>
                    <div class="form-group col-md-6">
                      <label for="pc-role">Rol <span class="text-danger">*</span></label>
                      <select id="pc-role" name="role" class="form-control" required>
                        <option value="">Selecciona una opci√≥n</option>
                        <option>Estudiante</option>
                        <option>Profesional</option>
                        <option>Docente</option>
                        <option>Otro</option>
                      </select>
                    </div>
                  </div>

                  <!-- D√≠as (labels con en dash, values con guion ASCII) -->
                  <fieldset class="mb-3">
                    <legend class="h6 mb-2">D√≠as en los que planeas participar (selecci√≥n m√∫ltiple)</legend>


                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="day-16" name="days"
                        value="D2" />
                      <label class="custom-control-label" for="day-16">Jueves 16 ‚Äì Cine Universitario UP</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="day-17" name="days"
                        value="D3" />
                      <label class="custom-control-label" for="day-17">Viernes 17 ‚Äì Virtual</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="day-17-night" name="days"
                        value="D3-night" />
                      <label class="custom-control-label" for="day-17-night">Viernes 17 ‚Äì El √ëeque Taproom (noche)</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="day-18" name="days"
                        value="D4" />
                      <label class="custom-control-label" for="day-18">S√°bado 18 ‚Äì PyParty</label>
                    </div>
                  </fieldset>

                  <!-- Temas -->
                  <fieldset class="mb-3">
                    <legend class="h6 mb-2">¬øQu√© temas te interesan?</legend>

                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="topic-ml" name="topics"
                        value="T1" />
                      <label class="custom-control-label" for="topic-ml">Inteligencia Artificial / Machine
                        Learning</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="topic-ds" name="topics"
                        value="T2" />
                      <label class="custom-control-label" for="topic-ds">Ciencia de Datos / Big Data</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="topic-web" name="topics"
                        value="T3" />
                      <label class="custom-control-label" for="topic-web">Desarrollo Web / APIs</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="topic-devops" name="topics"
                        value="T4" />
                      <label class="custom-control-label" for="topic-devops">Automatizaci√≥n / DevOps</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="topic-edu" name="topics"
                        value="T5" />
                      <label class="custom-control-label" for="topic-edu">Educaci√≥n con Python</label>
                    </div>

                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="topic-other" name="topics"
                        value="T6" />
                      <label class="custom-control-label" for="topic-other">Otros</label>
                    </div>
                  </fieldset>

                  <div class="form-group">
                    <label for="pc-msg">Comentarios adicionales</label>
                    <textarea id="pc-msg" name="comments" rows="3" class="form-control"
                      placeholder="Cu√©ntanos si tienes alg√∫n comentario" maxlength="500"></textarea>
                  </div>

                  <!-- Honeypot anti-spam -->
                  <div style="position:absolute; left:-5000px;" aria-hidden="true">
                    <label for="pc-hp">No completar este campo</label>
                    <input id="pc-hp" type="text" name="website" tabindex="-1" autocomplete="off" />
                  </div>

                  <div class="small text-muted mb-1">Al enviar, aceptas ser contactad@ solo con informaci√≥n de PyCon
                    Panam√° 2025.</div>
                  <div class="small text-muted mb-3">Tu c√≥digo de registro: <strong id="pc-code-display">‚Äî</strong>
                  </div>

                  <button type="submit" class="pageclip-form__submit btn btn-primary btn-block">
                    <span>Enviar registro</span>
                  </button>
                </form>
              </div>
            </div>
          </div>
          <!-- P√°gina enfocada y simple: sin secciones adicionales para reducir fricci√≥n -->
        </section>
      </div>
    </div>
  </main>

  <div data-include="footer"></div>

  <script defer src="js/components/include.js"></script>
  <div data-include="scripts"></div>

  <!-- C√≥digo de registro: genera en carga, renueva cada 3 min y al enviar -->
  <script>
    (function () {
      function secureCode() {
        const rnd = [...crypto.getRandomValues(new Uint8Array(6))]
          .map(b => b.toString(16).padStart(2, '0')).join('').toUpperCase();
        const stamp = new Date().toISOString().replace(/[-:TZ.]/g, '').slice(0, 14); // YYYYMMDDHHMMSS
        return `PC25-${stamp}-${rnd}`;
      }

      const form = document.getElementById('pc25-form');
      if (!form) return;

      const input = document.getElementById('pc-code');
      const display = document.getElementById('pc-code-display');

      function setCode(newCode) {
        if (input) input.value = newCode;
        if (display) display.textContent = newCode;
      }

      // 1) Generar en carga
      let code = secureCode();
      setCode(code);

      // 2) Renovar cada 3 minutos (180000 ms) sin persistir todav√≠a
      let codeTimer = setInterval(() => {
        code = secureCode();
        setCode(code);
      }, 180000);

      // Validaci√≥n: al menos un d√≠a seleccionado
      const dayChecks = form.querySelectorAll('input[name="days"]');
      const oneDaySelected = () => Array.from(dayChecks).some(cb => cb.checked);
      dayChecks.forEach(cb => cb.addEventListener('change', () => {
        if (oneDaySelected()) {
          // Limpiar mensajes de error personalizados
          dayChecks.forEach(c => c.setCustomValidity(''));
        }
      }));

      // Pasar PII por sessionStorage y NO guardarla en localStorage
      form.addEventListener('submit', function (e) {
        // Si no hay ning√∫n d√≠a seleccionado, bloquear env√≠o y mostrar mensaje
        if (!oneDaySelected()) {
          e.preventDefault();
          try {
            const first = dayChecks[0];
            first.setCustomValidity('Selecciona al menos un d√≠a.');
            first.reportValidity();
          } catch (_) { /* no-op */ }
          return;
        }
        // 3) Antes de enviar: asegurar c√≥digo actualizado y persistir el √∫ltimo enviado
        try { localStorage.setItem('pc25_last_code', input ? input.value : code); } catch (e) { }
        // Limpiar el timer (opcional)
        try { clearInterval(codeTimer); } catch (_) {}
        try {
          const email = (document.getElementById('pc-email') || {}).value || '';
          const name = (document.getElementById('pc-name') || {}).value || '';
          sessionStorage.setItem('pc25_last_email', email);
          sessionStorage.setItem('pc25_last_name', name);
        } catch (e) { }
      });
    })();
  </script>

  <!-- Serializa days/topics a campos ocultos (CSV-friendly) y valida al menos un d√≠a -->
  <script>
    (function () {
      const form = document.getElementById('pc25-form');
      if (!form) return;

      const multiFields = [
        { selector: 'input[name="days"]', hiddenName: 'days' },
        { selector: 'input[name="topics"]', hiddenName: 'topics' }
      ];

      function detachNames() {
        multiFields.forEach(({ selector }) => {
          form.querySelectorAll(selector).forEach(el => {
            if (!el.dataset.origName) el.dataset.origName = el.getAttribute('name');
            el.removeAttribute('name'); // Evita arrays crudos en el submit
          });
        });
      }

      function ensureHidden(name) {
        let el = form.querySelector('input[type="hidden"][name="' + name + '"]');
        if (!el) {
          el = document.createElement('input');
          el.type = 'hidden';
          el.name = name;
          form.appendChild(el);
        }
        return el;
      }

      function collectValues(selector) {
        return [...form.querySelectorAll(selector)]
          .filter(el => el.checked)
          .map(el => (el.value || '').trim());
      }

      function updateHidden() {
        const daysVals = collectValues('input[data-orig-name="days"]');
        const topicsVals = collectValues('input[data-orig-name="topics"]');
        ensureHidden('days').value = daysVals.join(', ');
        ensureHidden('topics').value = topicsVals.join(', ');
      }

      // Preparar: quitar name a los checkboxes y marcar con data-orig-name
      detachNames();
      form.querySelectorAll('input[type="checkbox"]').forEach(el => {
        if (!el.dataset.origName) {
          if (el.id.startsWith('day-')) el.dataset.origName = 'days';
          if (el.id.startsWith('topic-')) el.dataset.origName = 'topics';
        }
      });

      // Actualiza hidden al cargar y en cada cambio
      updateHidden();
      form.addEventListener('change', function (e) {
        if (e.target.type === 'checkbox') updateHidden();
      });

      // Validaci√≥n: al menos un d√≠a
      form.addEventListener('submit', function (e) {
        const anyDay = [...form.querySelectorAll('input[data-orig-name="days"]')].some(el => el.checked);
        if (!anyDay) {
          e.preventDefault();
          alert('Selecciona al menos un d√≠a de asistencia.');
          return;
        }
        updateHidden(); // asegura valores actualizados
      });
    })();
  </script>

  <!-- Pageclip JS (imprescindible para el submit/redirect) -->
  <script src="https://s.pageclip.co/v1/pageclip.js" charset="utf-8" defer></script>
</body>

</html>
